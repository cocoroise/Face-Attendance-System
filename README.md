# Face-Attendance-System

## 毕设

毕设计划做一个可以人脸识别的考勤系统  
这个库是用 node 写的后端库  
ORM 就用之前用过的 sequelize  
框架为 koa2  
测试用 jest

主要作用：

1. 封装百度的人脸识别 API 给前端用
2. 提供读写本地数据库的接口

---

需求分析：

1. [x] 管理员，教师和学生可以登录，对应一个 user 表
2. [x] 教师可以开启一条考勤记录，对应一个教师考勤表，里面有教师 id，课程 id,时间和教室的 id
3. [x] 学生可以查看自己的考勤记录，对应一个学生考勤表，里面记录每个学生的考勤记录，学生 id 为主键，考勤 Id 为外键，加上基本信息和这节课的自己的考勤记录
4. [ ] 学生也可以查看本周，本月和本学年的考勤记录，每门课的出勤率，说明考勤表里要记录第几周，课程里要记录学年的月份
5. [x] 其他的就是学院表，专业表，班级表，教室表，课程表，整理好外键关系，可以写 view，写好级联和触发器，后端对这些表做相应的增删改查

---

目前进度：

1. ~~基本的接口都写好了，可以开始写前端了，测试了一些接口，人脸的还没测。~~
2. ~~前端计划用 react 写移动端页面，浏览器调用手机摄像头，捕捉图片转成 base64 上传到百度云的接口。其他就是一些页面设计和适配问题，操作几个表的问题。~~
3. ~~想到的问题：课程表的展示和设计好像有点麻烦，而且最好能做到课程表可以点击进去看课程的详情。还有考勤数据库不知道设计的合不合理，级联写了，触发器和存储过程再看要不要写吧。图片的预加载和懒加载，把节流和防抖放进去。~~
4. 计划加的功能，手势签到，语音签到，考勤表打印成 excel 表，微信登陆，请假功能没有加，其他之后想到再加。
5. [2.4]学生端差页面切换动画，结果页动画，还要调一下 canvas 那个地方的比例。注册和登陆拦截路由，考勤信息查看和写入考勤等有了教师端再写。主要要加的考勤部分是判断是否需要考勤和查看之前的考勤记录。
6. [2.4]教师端计划有管理员，可加可不加。教师可以开启一条考勤记录，写入 attendance 表，学生在登陆的时候查看当前时间有没有需要考勤的记录，开始人脸识别，写入 stu_attendance 表。在这个班的同学考勤的时候可能需要实时反映考勤的情况，需要服务端推送，可能需要用到 websocket[socket.io 官方文档中文版](https://juejin.im/entry/59b126c46fb9a02487556964)。
   > 1.[x] 修改个人资料页面（表格）  
   > 2.[x] 首页，开启考勤记录（写数据库）  
   > 3.查看对应学生考勤情况页（websocket 或者 sse）  
   > 4.查看之前考勤情况页(表格和图表，可以选择周和月和学年)
